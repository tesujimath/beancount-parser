directives {
  # ...
  transaction {
    postings {
      spec {
        units { number { exact: "10" } currency: "MSFT" }
        cost { total { number { exact: "2000" } } currency: "USD" }
      }
    }
    postings {
      spec { units { number { exact: "-20000" } currency: "USD" } }
    }
  }
}
errors {
  message: "Per-unit cost may not be specified using total cost syntax: \'per_unit {\n  number {\n    exact: \"100\"\n  }\n}\ntotal {\n  number {\n    exact: \"2000\"\n  }\n}\ncurrency: \"USD\"\n\'; ignoring per-unit cost"
}
